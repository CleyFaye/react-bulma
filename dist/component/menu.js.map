{"version":3,"sources":["../../lib/component/menu.mjs"],"names":["Menu","Component","constructor","props","prepareState","visible","initiallyHidden","_onToggleMenu","bind","_onCloseMenu","updateState","oldState","_renderChilds","children","React","Children","map","child","cloneElement","_toggleParentMenu","_closeParentMenu","autoClose","undefined","render","classes","state","push","className","propTypes","classNamePropType","PropTypes","bool","node","Toggle","func","allModifiersPropList","Label","List","originalClick","onClick","newProps","ev","submenu","Submenu","active","title","string"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Component from \"../utils/component\";\nimport {\n  allModifiersPropList,\n  classNamePropType,\n} from \"../utils/props\";\nimport {\n  bringAll,\n} from \"../utils/modifier\";\nimport {\n  classString,\n} from \"../utils/class\";\n\n/**\n * Props:\n * - className\n * - initiallyHidden\n * - autoClose(bool): close when an item is clicked\n * \n * @example\n * @begincode\n * <Menu>\n *   <Menu.Toggle>X</Menu.Toggle>\n *   <Menu.Label>Title 1</Menu.Label>\n *   <Menu.List>\n *     <a>Elem 1</a>\n *     <a>Elem 2</a>\n *     <Menu.Submenu title=\"Submenu title\">\n *       <a>Sub elem 1</a>\n *       <a>Sub elem 2</a>\n *     </Menu.Submenu>\n *   </Menu.List>\n * </Menu>\n * @endcode\n * \n * @note\n * If a toggle is present, it will switch the \"is-visible\" property on the top\n * menu element.\n */\nexport default class Menu extends Component {\n  constructor(props) {\n    super(props);\n    this.prepareState({\n      visible: !props.initiallyHidden,\n    });\n    this._onToggleMenu = this._onToggleMenu.bind(this);\n    this._onCloseMenu = this._onCloseMenu.bind(this);\n  }\n\n  _onToggleMenu() {\n    this.updateState(oldState => ({\n      visible: !oldState.visible,\n    }));\n  }\n\n  _onCloseMenu() {\n    this.updateState({\n      visible: false,\n    });\n  }\n\n  _renderChilds(children) {\n    return React.Children.map(children, child => React.cloneElement(\n      child,\n      {\n        _toggleParentMenu: this._onToggleMenu,\n        _closeParentMenu: this.props.autoClose\n          ? this._onCloseMenu\n          : undefined,\n      }\n    ));\n  }\n\n  render() {\n    const classes = [\"menu\"];\n    if (this.state.visible) {\n      classes.push(\"is-visible\");\n    }\n    return <aside className={classString(classes, this.props.className)}>\n      {this._renderChilds(this.props.children)}\n    </aside>;\n  }\n}\nMenu.propTypes = {\n  className: classNamePropType,\n  initiallyHidden: PropTypes.bool,\n  autoClose: PropTypes.bool,\n  children: PropTypes.node,\n};\n\n/** Display a toggle for the menu */\nclass Toggle extends Component {\n  render() {\n    return <a\n      className={this.props.className}\n      onClick={this.props._toggleParentMenu}>\n      {this.props.children}\n    </a>;\n  }\n}\nToggle.propTypes = {\n  _toggleParentMenu: PropTypes.func,\n  _closeParentMenu: PropTypes.func,\n  className: classNamePropType,\n  children: PropTypes.node,\n  ...allModifiersPropList,\n};\nMenu.Toggle = Toggle;\n\n/**\n * Props:\n * - className\n * - All Bulma modifiers\n */\nclass Label extends Component {\n  render() {\n    const classes = [\"menu-label\"];\n    bringAll(classes, this.props);\n    return <p className={classString(classes, this.props.className)}>\n      {this.props.children}\n    </p>;\n  }\n}\nLabel.propTypes = {\n  _closeParentMenu: PropTypes.func,\n  className: classNamePropType,\n  children: PropTypes.node,\n  ...allModifiersPropList,\n};\nMenu.Label = Label;\n\n/** \n * Props:\n * - submenu (internal)\n */\nclass List extends Component {\n  _renderChilds(children) {\n    return React.Children.map(children, child => {\n      const originalClick = child.props.onClick;\n      const newProps = {};\n      if (this.props._closeParentMenu) {\n        newProps.onClick = ev => {\n          this.props._closeParentMenu();\n          if (originalClick) {\n            originalClick(ev);\n          }\n        };\n      }\n      return <li>{React.cloneElement(child, newProps)}</li>;\n    });\n  }\n\n  render() {\n    const classes = [];\n    if (!this.props.submenu) {\n      classes.push(\"menu-list\");\n    }\n    return <ul className={classString(classes, this.props.className)}>\n      {this._renderChilds(this.props.children)}\n    </ul>;\n  }\n}\nList.propTypes = {\n  _closeParentMenu: PropTypes.func,\n  className: classNamePropType,\n  submenu: PropTypes.bool,\n  children: PropTypes.node,\n};\nMenu.List = List;\n\n/**\n * Props:\n * - className\n * - title\n * - active\n */\nclass Submenu extends Component {\n  render() {\n    const classes = [];\n    if (this.props.active) {\n      classes.push(\"is-active\");\n    }\n    return <React.Fragment>\n      <a className={classString(classes)}>{this.props.title}</a>\n      <List submenu>{this.props.children}</List>\n    </React.Fragment>;\n  }\n}\nSubmenu.propTypes = {\n  className: classNamePropType,\n  active: PropTypes.bool,\n  title: PropTypes.string,\n  children: PropTypes.node,\n};"],"file":"menu.js"}